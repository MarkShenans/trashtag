<!doctype html>
<html lang="en">
    <head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
	    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
		<link rel="stylesheet" href="https://npmcdn.com/leaflet@1.0.0-rc.2/dist/leaflet.css" />
		<script src="https://npmcdn.com/leaflet@1.0.0-rc.2/dist/leaflet.js"></script>
    </head>
    <body>
	    <nav>
            <a href="http://www.trashtagproject.org/#modern-organic-thai">
                <img src="{{ url_for('static', filename='trashtag.png') }}">
            </a>
        </nav>
        <header>
            <h1>A map showing real-estate transactions done in Sacramento</h1>
            <div class="byline">
                By <a href="http://www.trashtagproject.org/#modern-organic-thai">The Trashtag project</a>
            </div>
        </header>
	    <div id="map" style="width:100%; height:600px;"></div>
        </table>
		<script>
		var mymap = L.map('map').setView([38.63, -121.43], 9);
		L.tileLayer('https://api.mapbox.com/styles/v1/mapbox/streets-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFya3NoZW5hbnMiLCJhIjoiY2lyM2QydzlvMDAxZmhzbnF2c3o1NTVpdSJ9.bKnGsClqqAmdol8nCUs4mQ', {
		attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
		maxZoom: 18,
		id: 'trashtag',
		accessToken: 'pk.eyJ1IjoibWFya3NoZW5hbnMiLCJhIjoiY2lyM2RxYnJ1MDAxcmh5bnFyZmZsY2lrYiJ9.cx1HTKFDjeolfmdtsQYHBQ'
		}).addTo(mymap);
		var data = {
              "type": "FeatureCollection",
              "features": [
                {% for obj in object_list %}
                {
                  "type": "Feature",
                  "properties": {
					"name": "Street",
					"street": "{{ obj.street }}",
                  },
                  "geometry": {
                    "type": "Point",
                    "coordinates": [{{ obj.longitude }}, {{ obj.latitude }}]
                  }
                }{% if not loop.last %},{% endif %}
                {% endfor %}
              ]
            };
			L.geoJson(data).addTo(mymap);

		</script>
    </body>
</html>